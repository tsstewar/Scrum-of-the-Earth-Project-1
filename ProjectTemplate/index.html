<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Timr</title>
	<!--DO NOT FORGET THIS SCRIPT TAG SO YOU CAN USE JQUERY!!!!!-->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

	<!--YOUR OWN JAVASCRIPT CAN GO RIGHT HERE-->
	<script type="text/javascript">
		var h5 = document.getElementsByTagName('h5'),
			start = document.getElementById('start'),
			stop = document.getElementById('stop'),
			clear = document.getElementById('clear'),
			seconds = 0, minutes = 0, hours = 0,
			t;

		window.addEventListener('load', () => { 
			$("#h5").hide();
			$("#start").hide();
			$("#stop").hide();
            $("#clear").hide();
            $("#timeComment").hide();
            $("#logBtn").hide();
            $("#logTable").hide();
		})


		function TestButtonHandler() {
			var webMethod = "ProjectServices.asmx/TestConnection";
			var parameters = "{}";			


			//jQuery ajax method
			$.ajax({
				type: "POST",
				url: webMethod,
				data: parameters,
				contentType: "application/json; charset=utf-8",
				dataType: "json",
				success: function (msg) {
					var responseFromServer = msg.d;
					alert(responseFromServer);
				},
				error: function (e) {
					alert("this code will only execute if javascript is unable to access the webservice");
				}
			});
        }

        function logon() {
            var id = document.getElementById("logonId").value;
            var pass = document.getElementById("logonPass").value;

            var webMethod = "ProjectServices.asmx/logon";
            var parameters = "{\"uid\":\"" + encodeURI(id) + "\", \"pass\":\"" + encodeURI(pass) + "\"} ";
			

            //jQuery ajax method
            $.ajax({
                type: "POST",
                url: webMethod,
                data: parameters,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    var responseFromServer = msg.d;
                    if (responseFromServer == true) {
						alert("logged in!")
						$("#h5").show();
						$("#start").show();
						$("#stop").show();
                        $("#clear").show();
                        $("#timeComment").show();
                        $("#logBtn").show();
                        $("#logTable").show();
                    }
                    else {
						alert("bad credentials")
						$("#h5").hide();
						$("#start").hide();
						$("#stop").hide();
                        $("#clear").hide();
                        $("#timeComment").hide();
                        $("#logBtn").hide();
                        $("#logTable").hide();
                    }
                },
                error: function (e) {
                    alert("this code will only execute if javascript is unable to access the webservice");
                }
            });
        }

        //TIMER PORTION JS

			

        function add() {
            seconds++;
            if (seconds >= 60) {
                seconds = 0;
                minutes++;
                if (minutes >= 60) {
                    minutes = 0;
                    hours++;
                }
            }
            document.getElementById("h5").innerHTML = (hours ? (hours > 9 ? hours : "0" + hours) : "00") + ":" + (minutes ? (minutes > 9 ? minutes : "0" + minutes) : "00") + ":" + (seconds > 9 ? seconds : "0" + seconds);
            //h5.textContent = (hours ? (hours > 9 ? hours : "0" + hours) : "00") + ":" + (minutes ? (minutes > 9 ? minutes : "0" + minutes) : "00") + ":" + (seconds > 9 ? seconds : "0" + seconds);

            timer();
        }

        function timer() {
            t = setTimeout(add, 1000);
        }
        //timer();


        /* Start button */
        //start.onclick = timer();


        /* Stop button */
        function plzstop() {
            clearTimeout(t);
        }

        /* Clear button */
        function clearnow() {
            document.getElementById("h5").innerHTML = "00:00:00";
            seconds = 0; minutes = 0; hours = 0;
        }
        //END TIMER PORTION

        //function to clear the timer and show a log entry with the recorded time and comment in a table below the timer
        function logtime() {
            var table = document.getElementById("logTable");
            var row = table.insertRow(1);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);

            //cell2.innerHTML = $("#timeComment").value;
            //cell2.innerHTML = $("#h5").value;

            cell1.innerHTML = document.getElementById("timeComment").value;
            cell2.innerHTML = document.getElementById("h5").innerHTML;

            clearnow();
        }

	</script>
	<!--END OF YOUR OWN JAVASCRIPT-->

	<!--AND YOUR OWN CSS CAN GO HERE AS WELL-->
	<style>
        #logTable {
            font-family: verdana, arial, sans-serif;
            font-size: 11px;
            color: #333333;
            border-width: 1px;
            border-color: #3A3A3A;
            border-collapse: collapse;
        }

        #logTable th {
            border-width: 1px;
            padding: 8px;
            border-style: solid;
            border-color: #517994;
            background-color: #B2CFD8;
        }

        #logTable tr:hover td {
            background-color: #DFEBF1;
        }

        #logTable td {
            border-width: 1px;
            padding: 8px;
            border-style: solid;
            border-color: #517994;
            background-color: #ffffff;
        }
	</style>
	<!--END OF YOUR OWN CSS-->
</head >
<body>
    <h1>Want to track time?</h1>
    <h2>Log in to Timr!</h2>

    <br />
    <h3>Username</h3>
    <input type="text" id="logonId" />
    <h3>Password</h3>
    <input type="text" id="logonPass" />
    <br />
    <br />
    <button onclick="javascript: logon();">Log On!</button>


    <!--TIMER HTML-->
    <br /><br /><br />
    <h5 id="h5"><time>00:00:00</time></h5>
    <button id="start" onclick="timer()">start</button>
    <button id="stop" onclick="plzstop()">stop</button>
    <button id="clear" onclick="clearnow()">clear</button>
    <input id="timeComment" placeholder="Enter a comment">
    <button id="logBtn" onclick="logtime()">Log Time</button>

    <!--Table for the timer log-->
    <br /><br /><br />
    <table id="logTable">
        <tr>
            <th>Log Comment</th>
            <th>Time Logged</th>
        </tr>
        <tr>
            <td>Team meeting</td>
            <td>00:01:23</td>
        </tr>
        <tr>
            <td>Contract negotitions</td>
            <td>00:04:12</td>
        </tr>
    </table>
    <br />


</body>
</html >
